# SDD (Spec-Driven Development) — 동물 MBTI + 움직임 테스트

**문서 버전**: 2.1 (UX/UI 리디자인 통합판)  
**최종 수정일**: 2026-02-05  
**작성자**: AI Assistant  

---

## 0) SDD 선언문 (문구 변경 금지)

# SDD 선언문 (Spec-Driven Development)
- 우리는 “명세(SDD.md) → 구현 → 검증” 순서를 지킨다.
- 구현 전/중에 요구사항·라우트·데이터 구조가 바뀌면, 코드를 바꾸기 전에 SDD.md를 먼저 수정한다(SSOT).
- 추측 금지: 모든 수정은 재현 경로/코드 근거를 남긴다.
- 안전: API 키/토큰/개인정보를 코드·로그에 남기지 않는다.
- 제약: 기존 스타일/구조 최대 유지, 새 라이브러리 추가 금지(필요 시 대안 제시 후 중단).
- 검증: 최소 `npm run lint` + `npm run build` 통과, 핵심 플로우 수동 체크리스트를 남긴다.

---

## 1) 목표 / 범위

### 목표
- `/`는 **밝은 랜딩(히어로 + 3단계 카드 + CTA 1개)**를 제공하고, CTA 1회 클릭으로 테스트 진입
- 상단 탭(움직임유형/움직임테스트/심층분석/아티클) **전역 고정**
- 테스트는 기본 **1문항/화면 + 타일형 선택지(Choice Tile)**로 완주율 최적화
- 결과 페이지에 **실행 가능한 루틴(오늘 10분)**과 근거(Evidence) 표시
- (선택) 움직임 테스트 체크로 **결과 신뢰도 보정(confidence: low|mid|high)**

### 비범위(현재 단계)
- 카메라 기반 자동 포즈/동작 분석 강제(MVP 제외 가능)
- 결제/업로드 저장/계정 시스템(Phase 3)
- 의료 진단/치료 목적 문구(금지)
- 대규모 일러스트/캐릭터 리소스 제작(아이콘 수준은 가능)

---

## 2) 라우트 맵(SSOT)

> 실제 경로는 레포에 맞춰 조정 가능. 변경 시 이 문서 먼저 업데이트.

- `/` : **랜딩(히어로+3카드+CTA)**  
- `/test` : 설문(기본 1문항/화면)  
- `/movement-test/result` : 결과 페이지  
- `/types` : 움직임유형(타입 소개) *(없으면 생성하거나 `/movement-test/types`로 대체 가능)*  
- `/movement-check` : 움직임테스트(가이드형 체크) *(없으면 생성 가능)*  
- `/deep-analysis` : 심층분석(유료 소개/업로드 진입)  
- `/articles` : 아티클 리스트  
- `/articles/[slug]` : 아티클 상세  

---

## 3) 디자인 시스템/토큰(SSOT)

> “16Personalities 스타일”은 **레이아웃 패턴만 참고**하며, 색/아이콘/일러스트는 자체 스타일로 적용한다.

### 3.1 테마 원칙
- 기본 테마는 **Light** (밝은 배경 + 흰 카드 + 얇은 보더)
- 카드/버튼은 **큰 라운드**, 그림자는 약하게
- 포인트 컬러는 2~3개만 사용(남발 금지)
- 다크 테마는 Phase(옵션)로만 고려(기본 제공 X)

### 3.2 토큰(권장 CSS 변수)
- `--bg`: 전체 배경(화이트 틴트)
- `--surface`: 카드 배경(화이트)
- `--text`: 본문 텍스트(진회색)
- `--muted`: 보조 텍스트
- `--border`: 카드/구분선
- `--shadow`: 카드 그림자(약하게)
- `--brand`: 메인 CTA
- `--brand-soft`: 선택/배지 배경
- `--accent`: 보조 포인트(선택)

> 구현 위치(권장): `src/app/globals.css` 또는 디자인 토큰 파일(현재 구조 유지)

---

## 4) UI 구성(SSOT)

### 4.1 TopTabs(전역)
- 탭: 움직임유형 / 움직임테스트 / 심층분석 / 아티클
- 현재 라우트 기반 active 표시
- 모바일 대응: 가로 스크롤 또는 줄바꿈(레이아웃 깨짐 금지)
- 라이트 테마 기준: 흰/연한 배경, 얇은 보더, 과한 그림자/그라데이션 금지

---

### 4.2 랜딩(`/`) (v2.1 신규)
- 구성(필수)
  1) **Hero**: 타이틀 + 서브카피 + CTA 1개
  2) **3단계 카드**: 테스트 → 결과 → 심층분석(유료)
  3) 하단 고지: “의학적 진단이 아닌 습관/성향 체크”
- CTA 클릭 시 `/test`로 이동(즉시 1문항 시작)
- 한 화면에 CTA는 1개만 강하게(중복 버튼 금지)

---

### 4.3 설문(`/test`)
- 기본 UX: **1문항/화면** (완주율 우선)
- 진행률: “질문 1/30” + 얇은 바(%)는 숨기거나 최소화
- 선택지 UI(필수): **Choice Tile(타일형 버튼)**  
  - 터치 영역 44px 이상
  - 선택 상태가 즉시 보이도록 배경/보더 변화
  - 긴 문장은 2줄 제한 + 말줄임
- 네비게이션
  - “다음”: 현재 문항 응답 후 활성화
  - “이전”: 답변 수정 가능
  - (옵션) 선택 즉시 자동 다음(향후 실험 가능)
- 미답변 처리
  - 강조(테두리/문구)
  - 첫 미답변 자동 포커스(1문항/화면이면 스크롤 대신 포커스 처리)
- 상태 저장: localStorage(기존 구현 유지)

> (옵션/Phase) “컴팩트 모드(4~6문항/페이지)”는 추후 제공 가능하나, 기본 모드는 1문항/화면 유지.

---

### 4.4 결과(`/movement-test/result`)
- 결과 타이틀: 메인 동물 + 서브타입
- 요약 3줄 + 특징 3~5개
- Evidence(필수):  
  - 설문에서 강하게 나온 항목 2~3개  
  - 불균형 체크 결과  
  - (있으면) 움직임 체크 요약  
- 오늘 10분 루틴(필수): 3개 운동(세트/횟수/주의점)
- 7일 루틴 프리뷰(선택): 표/리스트 형태로 스캔 가능
- CTA
  - 무료: 다시 테스트(1개)
  - 유료: 심층분석 CTA **1개만**(결과 하단 1개 카드/섹션에서만)
- 레이아웃: 결과 구성은 **카드형 섹션**으로 분리(스캔 가능)

---

## 5) 아티클/유튜브(SSOT)

### 5.1 아티클 IA(최소)
- 자세·통증 / 5분 루틴 / 테스트 해설 / 습관·세팅

### 5.2 글 템플릿(고정)
- 한 줄 결론 → 원인 → 5분 루틴 → 영상 → 체크리스트 → CTA(테스트/심층분석)

### 5.3 유튜브 성능 규칙(필수)
- 유튜브 iframe 즉시 로딩 금지
- 썸네일 클릭 시 로드(Lazy load)
- 모바일에서 CLS/성능 저하 없도록 placeholder 사용

---

## 6) 데이터/상태(SSOT)

### 6.1 저장소
- 진행 중 답변: localStorage(옵션)
- 결과: localStorage(옵션)

### 6.2 결과 산출
- 메인 타입: 4동물 점수 최대값
- 서브타입: 가중치/불균형/움직임 체크로 결정
- confidence: low/mid/high  
  - 움직임 체크 입력량/일관성/동점 여부 기반 단순 룰

### 6.3 금지 데이터
- 이메일/전화번호 등 개인 식별 정보 수집 금지(기본)

---

## 7) 구현 계획(파일/컴포넌트) (권장)

> 레포 구조를 우선 존중하고, 가능한 범위 내에서 교체한다.

### 7.1 신규/교체 컴포넌트(권장)
- `HeaderNav` 또는 `TopTabs` : 라이트 스타일 적용
- `Hero` : 랜딩 히어로
- `StepCards` : 3단계 카드
- `ChoiceTile` : 타일형 선택지(핵심)
- `ProgressMini` : “1/30 + 얇은 바”

### 7.2 기존 컴포넌트 유지/수정
- `MultipleChoice`, `BinaryChoice` : 내부 UI를 `ChoiceTile` 기반으로 리팩터 가능
- `ProgressBar` : 대체하거나 가볍게 축소(선택)

---

## 8) Definition of Done (DoD)

### 필수 커맨드
- `npm run lint` ✅
- `npm run build` ✅

### 수동 체크리스트(릴리스 전)
- [ ] `/` 접속 → 랜딩(히어로+3카드) 렌더 + CTA 정상
- [ ] CTA 클릭 → `/test` 진입(1문항 표시)
- [ ] 선택지 타일 클릭/키보드 선택 정상(포커스/ARIA)
- [ ] 진행/이전/다음 정상, 미답변 처리 정상
- [ ] 결과 페이지 정상 표시(타입/근거/오늘 루틴)
- [ ] 상단 탭 4개 라우팅 정상
- [ ] `/articles` 리스트/상세(2개) 정상(구현 시)
- [ ] 유튜브는 썸네일 클릭 시 로드(iframe 지연 확인)
- [ ] “진단” 표현 없음(문구 점검)

---

## 9) 변경 관리 규칙

- 요구사항/라우트/데이터 구조 변경 → **코드 수정 전에 SDD.md 먼저 수정**
- PR에는 반드시 포함:
  - 변경된 파일 리스트
  - 라우트 맵 변화(있으면)
  - lint/build 결과 요약
  - 수동 체크리스트 결과

---

## 🧾 Change Log
- v2.1 (2026-02-05): Light 리디자인 통합(랜딩 히어로+3카드+CTA), `/test` 분리, 1문항/화면, Choice Tile, 진행률 부담 최소화, 아티클/유튜브 Lazy load 규칙 추가
- v1.0: `/` 즉시 설문 시작, 4~6문항/페이지 기반 구조
